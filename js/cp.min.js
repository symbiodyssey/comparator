$(document).ready(function(){cpTable.calculateAllTotals(),$(".cp-table thead th").hover(cpTable.menuAddColumn,cpTable.hideMenu),$(".cp-crit").hover(cpTable.menuAddRow,cpTable.hideMenu),$("#showHTML").click(function(){cpTable.showHTML()}),$(".cp-table").keyup(function(e){var t=document.getSelection().anchorNode,n=$(t).parent().attr("class");n!=null&&(~n.indexOf("cp-score")||~n.indexOf("cp-weight"))&&cpTable.calculateAllTotals()})});var cpTable=function(e){return e.calculateAllTotals=function(){var e=$(".cp-table thead tr").children().length-1;for(i=0;i<e;i++)this.calculateTotal(i);this.bestOption()},e.calculateTotal=function(e){var t=0,n=0;$(".cp-table tbody tr").each(function(){var n=$(this).find("td.cp-score:eq("+e+")");t+=Number($(n).text()*$(this).find(".cp-weight").text())||0}),$(".cp-weight").each(function(){n+=Number($(this).text())||0});var r=Math.round(t/(n*100)*100);$(".cp-table td.cp-total:eq("+e+")").text(r)},e.bestOption=function(){$(".cp-table .cp-total").removeClass("cp-best");var e=$(".cp-table .cp-total:first-child"),t=$(e).index(),n=Number($(e).text())||0,r;$(".cp-table .cp-total").each(function(){r=Number($(this).text())||0,r>n&&(n=r,t=$(this).index())}),$(".cp-table .cp-total:nth-child("+(t+1)+")").addClass("cp-best")},e.showHTML=function(){document.getElementById("htmlcode").value=document.getElementById("comparator").innerHTML},e.addColumn=function(e){var t=$('<th colspan="2">Application 2</th>');$(".cp-table thead tr th:nth-child("+e+")").after(t),$(".cp-table tbody tr:nth-child(odd) td:nth-child("+e+")").after('<td colspan="2" class="cp-descr">Buttons have no labels</td>'),$(".cp-table tbody tr:nth-child(even) td:nth-child("+e*2+")").after('<th class="cp-lbl-score">Score :</th><td class="cp-score">70</td>'),$(".cp-table tfoot tr td:nth-child("+(e*2-1)+")").after('<td>Total :</td><td class="cp-total"></td>'),$(t).hover(this.menuAddColumn,this.hideMenu),this.calculateAllTotals()},e.addRow=function(e){console.log("add row:"+e);var t=$('<tr><td colspan="2" class="cp-crit">Design</td></tr>');$(t).find(".cp-crit").hover(this.menuAddRow,this.hideMenu);var n=$(".cp-table thead tr").children().length-1;if(e<=1){$(".cp-table tbody").prepend(t);for(i=0;i<n;i++)$(".cp-table tbody tr:nth-child(1)").append('<td colspan="2" class="cp-descr">Buttons have no labels</td>');$(".cp-table tbody tr:first-child").after('<tr><th class="cp-lbl-weight">Weight :</th><td class="cp-weight">5</td></tr>');for(i=0;i<n;i++)$(".cp-table tbody tr:nth-child(1)").append('<th class="cp-lbl-score">Score :</th><td class="cp-score">70</td>')}else{$(".cp-table tbody tr:nth-child("+(e*2-2)+")").after(t),console.log("position:"+(e*2-2));for(i=0;i<n;i++)$(".cp-table tbody tr:nth-child("+(e*2-1)+")").append('<td colspan="2" class="cp-descr">Buttons have no labels</td>');$(".cp-table tbody tr:nth-child("+(e*2-1)+")").after('<tr><th class="cp-lbl-weight">Weight :</th><td class="cp-weight">5</td></tr>');for(i=0;i<n;i++)$(".cp-table tbody tr:nth-child("+e*2+")").append('<th class="cp-lbl-score">Score :</th><td class="cp-score">70</td>')}this.calculateAllTotals()},e.removeColumn=function(e){$(".cp-table thead th:nth-child("+(e+1)+")").remove(),$(".cp-table tbody tr:nth-child(odd) td:nth-child("+(e+1)+")").remove(),$(".cp-table tbody tr:nth-child(even) th:nth-child("+(e+2)+")").remove(),$(".cp-table tbody tr:nth-child(even) td:nth-child("+(e+2)+")").remove(),$(".cp-table tfoot tr td:nth-child("+e*2+")").remove(),$(".cp-table tfoot tr td:nth-child("+e*2+")").remove(),this.calculateAllTotals()},e.removeRow=function(e){$(".cp-table tbody tr:nth-child("+(e*2-1)+")").remove(),$(".cp-table tbody tr:nth-child("+(e*2-1)+")").remove(),this.calculateAllTotals()},e.menuAddColumn=function(){$(this).append('<div class="cp-menu"><span onclick="cpTable.addColumn('+($(this).index()+1)+')"><i class="fas fa-plus"></i></span><span onclick="cpTable.removeColumn('+$(this).index()+')"><i class="fas fa-minus"></i></span></div>')},e.menuAddRow=function(){$(this).append('<div class="cp-menu"><span onclick="cpTable.addRow('+($(this).parent().index()/2+2)+')"><i class="fas fa-plus"></i></span><span onclick="cpTable.removeRow('+($(this).parent().index()+1)+')"><i class="fas fa-minus"></i></span></div>')},e.hideMenu=function(){$(".cp-menu").remove()},e}(cpTable||{})